<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.4</version>
    <date>2021-08-02T19:00:09Z</date>
    <groups>
        <group>
            <uuid>f609ef9a7ec748ae8ceb88ad929b7613</uuid>
            <name>Shelly</name>
        </group>
        <group>
            <uuid>36bff6c29af64692839d077febfc7079</uuid>
            <name>Templates/Network devices</name>
        </group>
    </groups>
    <templates>
        <template>
            <uuid>225341e8812846f684a475d8bf8c0e11</uuid>
            <template>Template Shelly Plug and Plug-S - MQTT</template>
            <name>Template Shelly Plug and Plug-S - MQTT</name>
            <groups>
                <group>
                    <name>Shelly</name>
                </group>
                <group>
                    <name>Templates/Network devices</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>330d1809adb14dca931a33e91e17715d</uuid>
                    <name>Skipped actions</name>
                    <type>DEPENDENT</type>
                    <key>actions_stats.skipped</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.actions_stats.skipped</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>255fb503e873486d995a5a8f35b1fe42</uuid>
                            <expression>change(/Template Shelly Plug and Plug-S - MQTT/actions_stats.skipped)&gt;0</expression>
                            <name>At least one action has been skipped</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>56415c86b7e546b2802edd7b84c60ec9</uuid>
                    <name>System configuration changes</name>
                    <type>DEPENDENT</type>
                    <key>cfg_changed_cnt</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.cfg_changed_cnt</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>79f27555e7744f439b8b6b17e4456165</uuid>
                            <expression>change(/Template Shelly Plug and Plug-S - MQTT/cfg_changed_cnt)&gt;0</expression>
                            <name>System configuration has been changed</name>
                            <priority>INFO</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>e5d9bd923b8c4ae99717b3ee3bcf7cf5</uuid>
                    <name>Cloud connected</name>
                    <type>DEPENDENT</type>
                    <key>cloud.connected</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.cloud.connected</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Cloud</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>066c3e4e07ff43dbb60a7f3d3606af2c</uuid>
                            <expression>change(/Template Shelly Plug and Plug-S - MQTT/cloud.connected)&lt;&gt;0</expression>
                            <name>Cloud connection state has changed</name>
                            <priority>AVERAGE</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Cloud</value>
                                </tag>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>1813d96eeac34855946ac4ded881267c</uuid>
                    <name>Cloud enabled</name>
                    <type>DEPENDENT</type>
                    <key>cloud.enabled</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.cloud.enabled</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Cloud</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>69b1dfe576ba41d584c9ff972d0670bf</uuid>
                            <expression>change(/Template Shelly Plug and Plug-S - MQTT/cloud.enabled)&lt;&gt;0</expression>
                            <name>Cloud configuration has changed</name>
                            <priority>INFO</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Cloud</value>
                                </tag>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>48d85cf2c56e4ed1905fd33557d23397</uuid>
                    <name>File system free size</name>
                    <type>DEPENDENT</type>
                    <key>fs_free</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.fs_free</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>3d5fa9dc2f3d4be5870f0b77ffb57bd4</uuid>
                    <name>File system total size</name>
                    <type>DEPENDENT</type>
                    <key>fs_size</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.fs_size</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>08c1ad0483cb4d5db0e99caafb365822</uuid>
                    <name>Electrometer self-check</name>
                    <type>DEPENDENT</type>
                    <key>meters-0.is_valid</key>
                    <delay>0</delay>
                    <valuemap>
                        <name>Self-check</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.meters[0].is_valid</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>BOOL_TO_DECIMAL</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Self-check</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>a11e22358b864304871a946147073859</uuid>
                    <name>Electrometer overpower occurred</name>
                    <type>DEPENDENT</type>
                    <key>meters-0.overpower</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.meters[0].overpower</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>a42d14f3658448fbbf1fd25fac2d356a</uuid>
                            <expression>last(/Template Shelly Plug and Plug-S - MQTT/meters-0.overpower)=&quot;true&quot;</expression>
                            <name>Overpower event has been detected</name>
                            <priority>DISASTER</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Relay</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>aadf8d0b23374d9fbdf0f3fab21dfcb8</uuid>
                    <name>Electrometer power</name>
                    <type>DEPENDENT</type>
                    <key>meters-0.power</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>W</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.meters[0].power</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>4662338f6cba40a88f35cee6a0ed5379</uuid>
                    <name>Electrometer total consumed</name>
                    <type>DEPENDENT</type>
                    <key>meters-0.total</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>Wh</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.meters[0].total</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>5349d53df71c4d9b96927926e4e7680c</uuid>
                    <name>MQTT connected</name>
                    <type>DEPENDENT</type>
                    <key>mqtt.connected</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.mqtt.connected</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>MQTT</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>6e22c44186c34eb9bab66152c29f1eca</uuid>
                            <expression>change(/Template Shelly Plug and Plug-S - MQTT/mqtt.connected)&lt;&gt;0</expression>
                            <name>MQTT connection state has changed</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>80d059ecd4234b2eace45e651455b26d</uuid>
                    <name>Status data</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    <delay>0</delay>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>Collect data from Shelly device status topic.</description>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Data collection</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>75de9ddcb1af4cd4b72a3341b14decae</uuid>
                            <expression>nodata(/Template Shelly Plug and Plug-S - MQTT/mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}],120s)=1</expression>
                            <name>No data received</name>
                            <priority>HIGH</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Data collection</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>2f4bb70085f6489ca8012e3809a3b68c</uuid>
                    <name>Device overtemperature occurred</name>
                    <type>DEPENDENT</type>
                    <key>overtemperature</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.overtemperature</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Temperature</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>7e4902e68934486b91158e294b41452d</uuid>
                            <expression>last(/Template Shelly Plug and Plug-S - MQTT/overtemperature)=&quot;true&quot;</expression>
                            <name>Overtemperature event has been detected</name>
                            <priority>DISASTER</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Temperature</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>f9fdfb57ea404f7f8ec4651931f4845d</uuid>
                    <name>RAM free</name>
                    <type>DEPENDENT</type>
                    <key>ram_free</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.ram_free</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>dccd1f2d8a644a9fa995e26f4622224b</uuid>
                    <name>RAM total</name>
                    <type>DEPENDENT</type>
                    <key>ram_total</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.ram_total</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>9567db9ca7c04e58aa55ae438c88e2a6</uuid>
                    <name>Relay has timer</name>
                    <type>DEPENDENT</type>
                    <key>relays-0.has_timer</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.relays[0].has_timer</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Relay</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>a212f8c7dd1d4ebd87e426ec0e9d9e0d</uuid>
                    <name>Relay turned on</name>
                    <type>DEPENDENT</type>
                    <key>relays-0.ison</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.relays[0].ison</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Relay</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>934856a143e247e9abfb46ee6da84d6d</uuid>
                            <expression>change(/Template Shelly Plug and Plug-S - MQTT/relays-0.ison)&lt;&gt;0</expression>
                            <name>Relay state has changed</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Relay</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>9f836949df92403fa95b743411cd6e61</uuid>
                    <name>Relay overpower occurred</name>
                    <type>DEPENDENT</type>
                    <key>relays-0.overpower</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.relays[0].overpower</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Relay</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>fe24da85a7fa4eea8091a8a408ac4ddf</uuid>
                            <expression>last(/Template Shelly Plug and Plug-S - MQTT/relays-0.overpower)=&quot;true&quot;</expression>
                            <name>Overpower event has been detected</name>
                            <priority>DISASTER</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Relay</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>9001301e669444deac2b66b5ff8d0e96</uuid>
                    <name>Relays last command source</name>
                    <type>DEPENDENT</type>
                    <key>relays-0.source</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.relays[0].source</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Relay</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>b7e871ecaee249f9a63cb1f90c93501b</uuid>
                    <name>Relay timer duration</name>
                    <type>DEPENDENT</type>
                    <key>relays-0.timer_duration</key>
                    <delay>0</delay>
                    <units>s</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.relays[0].timer_duration</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Relay</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>df1463c584a443bfbc11e4560fd8f8e0</uuid>
                    <name>Relay timer remaining</name>
                    <type>DEPENDENT</type>
                    <key>relays-0.timer_remaining</key>
                    <delay>0</delay>
                    <units>s</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.relays[0].timer_remaining</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Relay</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>1a96f51bbcdc43f987a32a3d965ec33e</uuid>
                    <name>Relay timer started</name>
                    <type>DEPENDENT</type>
                    <key>relays-0.timer_started</key>
                    <delay>0</delay>
                    <units>unixtime</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.relays[0].timer_started</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Relay</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>28ddcd40a68447a1b5ff8d2a665c96c2</uuid>
                    <name>Temperature self-check</name>
                    <type>DEPENDENT</type>
                    <key>tmp.is_valid</key>
                    <delay>0</delay>
                    <valuemap>
                        <name>Self-check</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.tmp.is_valid</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>BOOL_TO_DECIMAL</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Self-check</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Temperature</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>05f1aa3437f542efba1859197ab4fa9c</uuid>
                    <name>Temperature in Celsius</name>
                    <type>DEPENDENT</type>
                    <key>tmp.tC</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>°C</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.tmp.tC</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Temperature</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>eaa1657c3f1147768378107065288e8e</uuid>
                    <name>Temperature in Fahrenheit</name>
                    <type>DEPENDENT</type>
                    <key>tmp.tF</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>°F</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.tmp.tF</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Temperature</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>39e4e3f9bf0d462cb495311ddb7a0a92</uuid>
                    <name>Device time</name>
                    <type>DEPENDENT</type>
                    <key>unixtime</key>
                    <delay>0</delay>
                    <units>unixtime</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.unixtime</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>12efd2daf76f4e8699ddf911b7ab859f</uuid>
                            <expression>fuzzytime(/Template Shelly Plug and Plug-S - MQTT/unixtime,60s)=0</expression>
                            <name>Time is out of sync</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>a0ca56e615a64e56bb2ac4ae474bd304</uuid>
                    <name>Update available</name>
                    <type>DEPENDENT</type>
                    <key>update.has_update</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.update.has_update</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>7cb08a0449734f81aa4eb3419edc858d</uuid>
                            <expression>last(/Template Shelly Plug and Plug-S - MQTT/update.has_update)=&quot;true&quot;</expression>
                            <name>Update available</name>
                            <priority>INFO</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>133ad50ecd344a40825e252605af744d</uuid>
                    <name>Firmware new version</name>
                    <type>DEPENDENT</type>
                    <key>update.new_version</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.update.new_version</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>2475b41aa3914e79992aa871df0cee0d</uuid>
                    <name>Firmware old version</name>
                    <type>DEPENDENT</type>
                    <key>update.old_version</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.update.old_version</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>70fc06cd03914e9fa02d295db3e0380f</uuid>
                            <expression>change(/Template Shelly Plug and Plug-S - MQTT/update.old_version)&lt;&gt;0</expression>
                            <name>Version has changed</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>0995316d88c64692a39e7e3cf5dc5c6b</uuid>
                    <name>Uptime</name>
                    <type>DEPENDENT</type>
                    <key>uptime</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <units>uptime</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.uptime</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>02f35b7bfbf34a0ca7d5b2dd6da96430</uuid>
                            <expression>change(/Template Shelly Plug and Plug-S - MQTT/uptime)&lt;0</expression>
                            <name>Device has been restarted</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>851ee3e1108e4cf98e02d2593cb9cc91</uuid>
                    <name>WiFi connected</name>
                    <type>DEPENDENT</type>
                    <key>wifi_sta.connected</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.wifi_sta.connected</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>WiFi</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>5a86cfa8c61a42c9a5837f8e6cfa833e</uuid>
                    <name>WiFi IP</name>
                    <type>DEPENDENT</type>
                    <key>wifi_sta.ip</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.wifi_sta.ip</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>WiFi</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>ef6dde355c4947dc9f69d8515c8b162b</uuid>
                    <name>WiFi RSSI</name>
                    <type>DEPENDENT</type>
                    <key>wifi_sta.rssi</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <value_type>FLOAT</value_type>
                    <units>dBm</units>
                    <valuemap>
                        <name>Received Signal Strength Indicator</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.wifi_sta.rssi</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>WiFi</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>de7f088c6c5e42c6b77b30525a88ce72</uuid>
                    <name>WiFi SSID</name>
                    <type>DEPENDENT</type>
                    <key>wifi_sta.ssid</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.wifi_sta.ssid</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>WiFi</value>
                        </tag>
                    </tags>
                </item>
            </items>
            <macros>
                <macro>
                    <macro>{$MQTT_BROKER_HOST}</macro>
                    <value>tcp://localhost:1883</value>
                    <description>MQTT broker host</description>
                </macro>
                <macro>
                    <macro>{$MQTT_BROKER_PASS}</macro>
                    <type>SECRET_TEXT</type>
                    <description>MQTT broker password, if configured</description>
                </macro>
                <macro>
                    <macro>{$MQTT_BROKER_USER}</macro>
                    <description>MQTT broker user, if configured</description>
                </macro>
                <macro>
                    <macro>{$MQTT_DEVICE_ID}</macro>
                    <description>Shelly device MQTT ID</description>
                </macro>
            </macros>
            <valuemaps>
                <valuemap>
                    <uuid>66528c50ab8545a594ad0a057ddbb4a0</uuid>
                    <name>Received Signal Strength Indicator</name>
                    <mappings>
                        <mapping>
                            <type>GREATER_OR_EQUAL</type>
                            <value>-30</value>
                            <newvalue>Amazing</newvalue>
                        </mapping>
                        <mapping>
                            <type>GREATER_OR_EQUAL</type>
                            <value>-67</value>
                            <newvalue>Very Good</newvalue>
                        </mapping>
                        <mapping>
                            <type>GREATER_OR_EQUAL</type>
                            <value>-70</value>
                            <newvalue>Good</newvalue>
                        </mapping>
                        <mapping>
                            <type>GREATER_OR_EQUAL</type>
                            <value>-80</value>
                            <newvalue>Not Good</newvalue>
                        </mapping>
                        <mapping>
                            <type>LESS_OR_EQUAL</type>
                            <value>-81</value>
                            <newvalue>Unusable</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
                <valuemap>
                    <uuid>625274c7a7884238bd32c6289b1483e3</uuid>
                    <name>Self-check</name>
                    <mappings>
                        <mapping>
                            <value>1</value>
                            <newvalue>Working</newvalue>
                        </mapping>
                        <mapping>
                            <value>0</value>
                            <newvalue>Not working</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
            </valuemaps>
        </template>
    </templates>
    <triggers>
        <trigger>
            <uuid>911a6f09a42449259ea48f524a488532</uuid>
            <expression>last(/Template Shelly Plug and Plug-S - MQTT/fs_free)&gt;=last(/Template Shelly Plug and Plug-S - MQTT/fs_size)*0.8 and last(/Template Shelly Plug and Plug-S - MQTT/fs_free)&lt;last(/Template Shelly Plug and Plug-S - MQTT/fs_size)*0.9</expression>
            <name>Sensor file system space is low</name>
            <status>DISABLED</status>
            <priority>WARNING</priority>
            <tags>
                <tag>
                    <tag>Application</tag>
                    <value>System</value>
                </tag>
            </tags>
        </trigger>
        <trigger>
            <uuid>0857f26833f34ee18cab5f256cded41a</uuid>
            <expression>last(/Template Shelly Plug and Plug-S - MQTT/fs_free)&gt;=last(/Template Shelly Plug and Plug-S - MQTT/fs_size)*0.9</expression>
            <name>Sensor file system space is low</name>
            <status>DISABLED</status>
            <priority>AVERAGE</priority>
            <tags>
                <tag>
                    <tag>Application</tag>
                    <value>System</value>
                </tag>
            </tags>
        </trigger>
        <trigger>
            <uuid>bd73054483994cf19264e2ca6551d4c7</uuid>
            <expression>last(/Template Shelly Plug and Plug-S - MQTT/ram_free)&gt;=last(/Template Shelly Plug and Plug-S - MQTT/ram_total)*0.8 and last(/Template Shelly Plug and Plug-S - MQTT/ram_free)&lt;last(/Template Shelly Plug and Plug-S - MQTT/ram_total)*0.9</expression>
            <name>Sensor memory is low</name>
            <status>DISABLED</status>
            <priority>WARNING</priority>
            <tags>
                <tag>
                    <tag>Application</tag>
                    <value>System</value>
                </tag>
            </tags>
        </trigger>
        <trigger>
            <uuid>41368409cb474c7cae715a44839dcc4c</uuid>
            <expression>last(/Template Shelly Plug and Plug-S - MQTT/ram_free)&gt;=last(/Template Shelly Plug and Plug-S - MQTT/ram_total)*0.9</expression>
            <name>Sensor memory is low</name>
            <status>DISABLED</status>
            <priority>AVERAGE</priority>
            <tags>
                <tag>
                    <tag>Application</tag>
                    <value>System</value>
                </tag>
            </tags>
        </trigger>
    </triggers>
</zabbix_export>
