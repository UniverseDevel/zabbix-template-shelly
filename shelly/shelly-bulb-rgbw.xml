<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.4</version>
    <date>2021-10-06T11:09:16Z</date>
    <groups>
        <group>
            <uuid>f609ef9a7ec748ae8ceb88ad929b7613</uuid>
            <name>Shelly</name>
        </group>
        <group>
            <uuid>36bff6c29af64692839d077febfc7079</uuid>
            <name>Templates/Network devices</name>
        </group>
    </groups>
    <templates>
        <template>
            <uuid>2304f9f6bd8741cfa2fcca834ea45fa5</uuid>
            <template>Template Shelly Bulb RGBW</template>
            <name>Template Shelly Bulb RGBW</name>
            <groups>
                <group>
                    <name>Shelly</name>
                </group>
                <group>
                    <name>Templates/Network devices</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>487e9726eba04925ae11cfe8b9e5c487</uuid>
                    <name>Skipped actions</name>
                    <type>DEPENDENT</type>
                    <key>actions_stats.skipped</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.actions_stats.skipped</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>1491aa93fe5443c69249edc4dc2b57e7</uuid>
                            <expression>change(/Template Shelly Bulb RGBW/actions_stats.skipped)&gt;0</expression>
                            <name>At least one action has been skipped</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>5044b2b7774a4b6bb277e86098592e86</uuid>
                    <name>System configuration changes</name>
                    <type>DEPENDENT</type>
                    <key>cfg_changed_cnt</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.cfg_changed_cnt</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>2b5988ababab4fe0a435d8ebfd31387e</uuid>
                            <expression>change(/Template Shelly Bulb RGBW/cfg_changed_cnt)&gt;0</expression>
                            <name>System configuration has been changed</name>
                            <priority>INFO</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>2cd32647c9594da5b02da1a65b8ede2d</uuid>
                    <name>Cloud connected</name>
                    <type>DEPENDENT</type>
                    <key>cloud.connected</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.cloud.connected</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Cloud</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>cced6d7775bf4ca48cc2b83587c592e2</uuid>
                            <expression>change(/Template Shelly Bulb RGBW/cloud.connected)&lt;&gt;0</expression>
                            <name>Cloud connection state has changed</name>
                            <priority>AVERAGE</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Cloud</value>
                                </tag>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>7e78233c83c2438d9add4c5de8d45032</uuid>
                    <name>Cloud enabled</name>
                    <type>DEPENDENT</type>
                    <key>cloud.enabled</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.cloud.enabled</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Cloud</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>aab2c35fb6a0492b81e8c3962cfddd99</uuid>
                            <expression>change(/Template Shelly Bulb RGBW/cloud.enabled)&lt;&gt;0</expression>
                            <name>Cloud configuration has changed</name>
                            <priority>INFO</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Cloud</value>
                                </tag>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>85f9ead1b0014840b97f477e9e537ba3</uuid>
                    <name>File system free size</name>
                    <type>DEPENDENT</type>
                    <key>fs_free</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.fs_free</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>a82f48c4e0b14cc18bf29c32d1798bbd</uuid>
                    <name>File system total size</name>
                    <type>DEPENDENT</type>
                    <key>fs_size</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.fs_size</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>0c25f1d9a33242d2a409cee2a2af2857</uuid>
                    <name>Data collector - HTTP</name>
                    <type>HTTP_AGENT</type>
                    <key>http.get[{$SHELLY_HOST},{$SHELLY_USER},{$SHELLY_PASS}]</key>
                    <delay>30</delay>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$SHELLY_USER}</username>
                    <password>{$SHELLY_PASS}</password>
                    <description>Collect data from Shelly device status API.</description>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.body</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <timeout>25s</timeout>
                    <url>http://{$SHELLY_HOST}/status</url>
                    <follow_redirects>NO</follow_redirects>
                    <output_format>JSON</output_format>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Data collection</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>c916dfad59784ba4bf0a5bd4816bec42</uuid>
                    <name>ICMP loss</name>
                    <type>SIMPLE</type>
                    <key>icmppingloss[{$SHELLY_HOST}]</key>
                    <history>1w</history>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>b13469d7bace4e679d61b1e4e9545bea</uuid>
                            <expression>min(/Template Shelly Bulb RGBW/icmppingloss[{$SHELLY_HOST}],5m)&gt;{$ICMP_LOSS_WARN} and min(/Template Shelly Bulb RGBW/icmppingloss[{$SHELLY_HOST}],5m)&lt;100</expression>
                            <name>High ICMP ping loss</name>
                            <priority>WARNING</priority>
                            <description>Last value: {ITEM.LASTVALUE1}.</description>
                            <dependencies>
                                <dependency>
                                    <name>Unavailable by ICMP ping</name>
                                    <expression>max(/Template Shelly Bulb RGBW/icmpping[{$SHELLY_HOST}],#3)=0</expression>
                                </dependency>
                            </dependencies>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>6ac81482c9974bbb9e71fd55c889b6dc</uuid>
                    <name>ICMP response time</name>
                    <type>SIMPLE</type>
                    <key>icmppingsec[{$SHELLY_HOST}]</key>
                    <history>1w</history>
                    <value_type>FLOAT</value_type>
                    <units>s</units>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>a2709203d6484818a55bfcf8449ef242</uuid>
                            <expression>avg(/Template Shelly Bulb RGBW/icmppingsec[{$SHELLY_HOST}],5m)&gt;{$ICMP_RESPONSE_TIME_WARN}</expression>
                            <name>High ICMP ping response time</name>
                            <priority>WARNING</priority>
                            <description>Last value: {ITEM.LASTVALUE1}.</description>
                            <dependencies>
                                <dependency>
                                    <name>High ICMP ping loss</name>
                                    <expression>min(/Template Shelly Bulb RGBW/icmppingloss[{$SHELLY_HOST}],5m)&gt;{$ICMP_LOSS_WARN} and min(/Template Shelly Bulb RGBW/icmppingloss[{$SHELLY_HOST}],5m)&lt;100</expression>
                                </dependency>
                                <dependency>
                                    <name>Unavailable by ICMP ping</name>
                                    <expression>max(/Template Shelly Bulb RGBW/icmpping[{$SHELLY_HOST}],#3)=0</expression>
                                </dependency>
                            </dependencies>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>cc296052771b441f82426a8952e34570</uuid>
                    <name>ICMP ping</name>
                    <type>SIMPLE</type>
                    <key>icmpping[{$SHELLY_HOST}]</key>
                    <history>1w</history>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>ee88e27374dc451497f88b193c88b75b</uuid>
                            <expression>max(/Template Shelly Bulb RGBW/icmpping[{$SHELLY_HOST}],#3)=0</expression>
                            <name>Unavailable by ICMP ping</name>
                            <priority>HIGH</priority>
                            <description>Last value: {ITEM.LASTVALUE1}.
Last three attempts returned timeout.  Please check device connectivity.</description>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>e839ce9f08b14df98cfeba29c695d884</uuid>
                    <name>Light color channel blue</name>
                    <type>DEPENDENT</type>
                    <key>lights-0.blue</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.lights[0].blue</parameter>
                            </parameters>
                            <error_handler>DISCARD_VALUE</error_handler>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Light</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>663ad00ededa4f3897207ba911163e42</uuid>
                    <name>Light white brightness</name>
                    <type>DEPENDENT</type>
                    <key>lights-0.brightness</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.lights[0].brightness</parameter>
                            </parameters>
                            <error_handler>DISCARD_VALUE</error_handler>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Light</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>e283bcc78f0e492984c8514425690645</uuid>
                    <name>Light color</name>
                    <type>DEPENDENT</type>
                    <key>lights-0.color</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>var json_data = JSON.parse(value);

var color = 'Unknown';

var mode = '?';
var red = '?';
var green = '?';
var blue = '?';
var gain = '?';
var temp = '?';
var brightness = '?';

if (json_data.lights[0].mode !== undefined) {
  mode = json_data.lights[0].mode;
}
if (json_data.lights[0].red !== undefined) {
  red = json_data.lights[0].red;
}
if (json_data.lights[0].green !== undefined) {
  green = json_data.lights[0].green;
}
if (json_data.lights[0].blue !== undefined) {
  blue = json_data.lights[0].blue;
}
if (json_data.lights[0].gain !== undefined) {
  gain = json_data.lights[0].gain;
}
if (json_data.lights[0].temp !== undefined) {
  temp = json_data.lights[0].temp;
}
if (json_data.lights[0].brightness !== undefined) {
  brightness = json_data.lights[0].brightness;
}

if (mode == 'color') {
  color = mode + ' - R: ' + red + ', G: ' + green + ', B: ' + blue + ', Gain: ' + gain;
} else if (mode == 'white') {
  color = mode + ' - Temp: ' + temp + ', Bright: ' + brightness;
} else {
  color = 'Unknown (' + mode + ') - R: ' + red + ', G: ' + green + ', B: ' + blue + ', Gain: ' + gain + ', Temp: ' + temp + ', Bright: ' + brightness;
}

return color ;</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Light</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>daa8998a931f414383cc6080d0584735</uuid>
                            <expression>change(/Template Shelly Bulb RGBW/lights-0.color)&lt;&gt;0</expression>
                            <name>Light color changed</name>
                            <status>DISABLED</status>
                            <priority>INFO</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Light</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>f8bbb822ae2f430483077fc40b478da5</uuid>
                    <name>Light color effect</name>
                    <type>DEPENDENT</type>
                    <key>lights-0.effect</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <valuemap>
                        <name>Light effects</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.lights[0].effect</parameter>
                            </parameters>
                            <error_handler>DISCARD_VALUE</error_handler>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Light</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>415ce11b71104f1188aee20bc79675ad</uuid>
                    <name>Light color gain</name>
                    <type>DEPENDENT</type>
                    <key>lights-0.gain</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.lights[0].gain</parameter>
                            </parameters>
                            <error_handler>DISCARD_VALUE</error_handler>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Light</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>a224f626002045198b3d65a08dabb977</uuid>
                    <name>Light color channel green</name>
                    <type>DEPENDENT</type>
                    <key>lights-0.green</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.lights[0].green</parameter>
                            </parameters>
                            <error_handler>DISCARD_VALUE</error_handler>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Light</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>f96c82230760490f84b56a8c6e1c82b4</uuid>
                    <name>Light has timer</name>
                    <type>DEPENDENT</type>
                    <key>lights-0.has_timer</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.lights[0].has_timer</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Light</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>e0d94daa32014322aeab76f2dfe8548f</uuid>
                    <name>Light turned on</name>
                    <type>DEPENDENT</type>
                    <key>lights-0.ison</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.lights[0].ison</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Light</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>1f225eb60819496e9824e7b4da2d88f7</uuid>
                            <expression>change(/Template Shelly Bulb RGBW/lights-0.ison)&lt;&gt;0</expression>
                            <name>Light state changed</name>
                            <status>DISABLED</status>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Light</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>7b52d220f12841658e7f23b4459ad5d7</uuid>
                    <name>Light mode</name>
                    <type>DEPENDENT</type>
                    <key>lights-0.mode</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.lights[0].mode</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Light</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>1b9b36635b2b45e698e202285b5a1756</uuid>
                    <name>Light color channel red</name>
                    <type>DEPENDENT</type>
                    <key>lights-0.red</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.lights[0].red</parameter>
                            </parameters>
                            <error_handler>DISCARD_VALUE</error_handler>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Light</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>531d171b0d034a0cb61ce146140a0b4c</uuid>
                    <name>Light white temperature</name>
                    <type>DEPENDENT</type>
                    <key>lights-0.temp</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.lights[0].temp</parameter>
                            </parameters>
                            <error_handler>DISCARD_VALUE</error_handler>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Light</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>0dd3ed591af845b493dc4a5f6e68b2a5</uuid>
                    <name>Light timer remaining</name>
                    <type>DEPENDENT</type>
                    <key>lights-0.timer_remaining</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.lights[0].timer_remaining</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Light</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>f4e5f2b5c8bf49059533677a1ef0cf1b</uuid>
                    <name>Light transition time</name>
                    <type>DEPENDENT</type>
                    <key>lights-0.transition</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <units>ms</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.lights[0].transition</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Light</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>83f1857d1f024d199c29343831adb4c6</uuid>
                    <name>Electrometer self-check</name>
                    <type>DEPENDENT</type>
                    <key>meters-0.is_valid</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <valuemap>
                        <name>Self-check</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.meters[0].is_valid</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>BOOL_TO_DECIMAL</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Self-check</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>c037ab119aed44fdbd960ef85cc433a2</uuid>
                    <name>Electrometer power</name>
                    <type>DEPENDENT</type>
                    <key>meters-0.power</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>W</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.meters[0].power</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>213db724f1f148ac9a9458a94d20c700</uuid>
                    <name>Electrometer total consumed</name>
                    <type>DEPENDENT</type>
                    <key>meters-0.total</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>Wh</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.meters[0].total</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>56bec3f8889147338bb994f5ea79c4c7</uuid>
                    <name>MQTT connected</name>
                    <type>DEPENDENT</type>
                    <key>mqtt.connected</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.mqtt.connected</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>MQTT</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>f7345aedab2b4617b591435b56e74024</uuid>
                            <expression>change(/Template Shelly Bulb RGBW/mqtt.connected)&lt;&gt;0</expression>
                            <name>MQTT connection state has changed</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>e35691efa2a44b40ae9f4c67d030ea1f</uuid>
                    <name>Data collector - MQTT</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    <delay>0</delay>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>Collect data from Shelly device status topic.</description>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Data collection</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>e50bb554f4ac4c66be44b0e81c75eb9a</uuid>
                    <name>RAM free</name>
                    <type>DEPENDENT</type>
                    <key>ram_free</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.ram_free</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>68d7380e957e407f90834af68d306157</uuid>
                    <name>RAM total</name>
                    <type>DEPENDENT</type>
                    <key>ram_total</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.ram_total</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>83c2f76a70c64a06ade7c94c2e4b810b</uuid>
                    <name>Status data</name>
                    <type>DEPENDENT</type>
                    <key>status</key>
                    <delay>0</delay>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>Collect data from HTTP or MQTT data collector items.</description>
                    <master_item>
                        <key>http.get[{$SHELLY_HOST},{$SHELLY_USER},{$SHELLY_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Data collection</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>bdd64b4c8d124c50b49823c501c43262</uuid>
                            <expression>nodata(/Template Shelly Bulb RGBW/status,120s)=1</expression>
                            <name>No data received</name>
                            <priority>HIGH</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Data collection</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>e212dea903bc4c7dbccf9c5b341b0e02</uuid>
                    <name>Device time</name>
                    <type>DEPENDENT</type>
                    <key>unixtime</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <units>unixtime</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.unixtime</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>34ae51bb773f46fe9e7e2fee611c831f</uuid>
                            <expression>fuzzytime(/Template Shelly Bulb RGBW/unixtime,60s)=0</expression>
                            <name>Time is out of sync</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>9bdeb607f22d4328a0fe442d798845e1</uuid>
                    <name>Firmware beta version</name>
                    <type>DEPENDENT</type>
                    <key>update.beta_version</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.update.beta_version</parameter>
                            </parameters>
                            <error_handler>CUSTOM_VALUE</error_handler>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>46eb8615485348ca99e39bc0a46f9a63</uuid>
                    <name>Update available</name>
                    <type>DEPENDENT</type>
                    <key>update.has_update</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.update.has_update</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>dfc0b4e32fe44d00ade256bd533f6e11</uuid>
                            <expression>last(/Template Shelly Bulb RGBW/update.has_update)=&quot;true&quot;</expression>
                            <name>Update available</name>
                            <priority>INFO</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>c76a5e4c8581459c8dc2bc01c09105b2</uuid>
                    <name>Firmware new version</name>
                    <type>DEPENDENT</type>
                    <key>update.new_version</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.update.new_version</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>e56ea45d5c534c02b9ee8698da29509b</uuid>
                    <name>Firmware old version</name>
                    <type>DEPENDENT</type>
                    <key>update.old_version</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.update.old_version</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>c935efda6b6c4667b89942242cc5e473</uuid>
                            <expression>change(/Template Shelly Bulb RGBW/update.old_version)&lt;&gt;0</expression>
                            <name>Version has changed</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>8e71c700a3ce48ffba32e8a674b3c109</uuid>
                    <name>Update status</name>
                    <type>DEPENDENT</type>
                    <key>update.status</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.update.status</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>0948db270a8646cbae47a4508ef41420</uuid>
                    <name>Uptime</name>
                    <type>DEPENDENT</type>
                    <key>uptime</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <units>uptime</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.uptime</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>76b64ca0bdfc4df5ac779222129dd70f</uuid>
                            <expression>change(/Template Shelly Bulb RGBW/uptime)&lt;0</expression>
                            <name>Device has been restarted</name>
                            <status>DISABLED</status>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>70391e27ddba4993940a69eac68dc6fb</uuid>
                    <name>WiFi connected</name>
                    <type>DEPENDENT</type>
                    <key>wifi_sta.connected</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.wifi_sta.connected</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>WiFi</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>e1866c5349b84ec28905b46683cc01af</uuid>
                    <name>WiFi IP</name>
                    <type>DEPENDENT</type>
                    <key>wifi_sta.ip</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.wifi_sta.ip</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>WiFi</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>7f89d382a0a1460faeadd8634602a592</uuid>
                    <name>WiFi RSSI</name>
                    <type>DEPENDENT</type>
                    <key>wifi_sta.rssi</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <value_type>FLOAT</value_type>
                    <units>dBm</units>
                    <valuemap>
                        <name>Received Signal Strength Indicator</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.wifi_sta.rssi</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>WiFi</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>49dbe3c784404b368782dff4eb060aa6</uuid>
                    <name>WiFi SSID</name>
                    <type>DEPENDENT</type>
                    <key>wifi_sta.ssid</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.wifi_sta.ssid</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>status</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>WiFi</value>
                        </tag>
                    </tags>
                </item>
            </items>
            <macros>
                <macro>
                    <macro>{$ICMP_LOSS_WARN}</macro>
                    <value>20</value>
                </macro>
                <macro>
                    <macro>{$ICMP_RESPONSE_TIME_WARN}</macro>
                    <value>0.15</value>
                </macro>
                <macro>
                    <macro>{$MQTT_BROKER_HOST}</macro>
                    <value>tcp://localhost:1883</value>
                    <description>MQTT broker host</description>
                </macro>
                <macro>
                    <macro>{$MQTT_BROKER_PASS}</macro>
                    <type>SECRET_TEXT</type>
                    <description>MQTT broker password, if configured</description>
                </macro>
                <macro>
                    <macro>{$MQTT_BROKER_USER}</macro>
                    <description>MQTT broker user, if configured</description>
                </macro>
                <macro>
                    <macro>{$MQTT_DEVICE_ID}</macro>
                    <description>Shelly device MQTT ID</description>
                </macro>
                <macro>
                    <macro>{$SHELLY_HOST}</macro>
                    <description>Device host</description>
                </macro>
                <macro>
                    <macro>{$SHELLY_PASS}</macro>
                    <type>SECRET_TEXT</type>
                    <description>Device password, if configured</description>
                </macro>
                <macro>
                    <macro>{$SHELLY_USER}</macro>
                    <value>admin</value>
                    <description>Device user, if configured</description>
                </macro>
            </macros>
            <valuemaps>
                <valuemap>
                    <uuid>3979e3dbc225402299b01107ba69181c</uuid>
                    <name>Light effects</name>
                    <mappings>
                        <mapping>
                            <value>0</value>
                            <newvalue>Off</newvalue>
                        </mapping>
                        <mapping>
                            <value>1</value>
                            <newvalue>Meteor Shower</newvalue>
                        </mapping>
                        <mapping>
                            <value>2</value>
                            <newvalue>Gradual Change</newvalue>
                        </mapping>
                        <mapping>
                            <value>3</value>
                            <newvalue>Flash</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
                <valuemap>
                    <uuid>27b7715f12794ed1a0ea90ebf249d204</uuid>
                    <name>Received Signal Strength Indicator</name>
                    <mappings>
                        <mapping>
                            <type>GREATER_OR_EQUAL</type>
                            <value>-30</value>
                            <newvalue>Amazing</newvalue>
                        </mapping>
                        <mapping>
                            <type>GREATER_OR_EQUAL</type>
                            <value>-67</value>
                            <newvalue>Very Good</newvalue>
                        </mapping>
                        <mapping>
                            <type>GREATER_OR_EQUAL</type>
                            <value>-70</value>
                            <newvalue>Good</newvalue>
                        </mapping>
                        <mapping>
                            <type>GREATER_OR_EQUAL</type>
                            <value>-80</value>
                            <newvalue>Not Good</newvalue>
                        </mapping>
                        <mapping>
                            <type>LESS_OR_EQUAL</type>
                            <value>-81</value>
                            <newvalue>Unusable</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
                <valuemap>
                    <uuid>e10d286089ce48f5b8c179e39d8d4827</uuid>
                    <name>Self-check</name>
                    <mappings>
                        <mapping>
                            <value>1</value>
                            <newvalue>Working</newvalue>
                        </mapping>
                        <mapping>
                            <value>0</value>
                            <newvalue>Not working</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
            </valuemaps>
        </template>
    </templates>
</zabbix_export>
