<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.4</version>
    <date>2021-08-02T18:59:26Z</date>
    <groups>
        <group>
            <uuid>f609ef9a7ec748ae8ceb88ad929b7613</uuid>
            <name>Shelly</name>
        </group>
        <group>
            <uuid>36bff6c29af64692839d077febfc7079</uuid>
            <name>Templates/Network devices</name>
        </group>
    </groups>
    <templates>
        <template>
            <uuid>161c4bb799a54116bd8c019a9680a6a7</uuid>
            <template>Template Shelly Motion - MQTT</template>
            <name>Template Shelly Motion - MQTT</name>
            <groups>
                <group>
                    <name>Shelly</name>
                </group>
                <group>
                    <name>Templates/Network devices</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>0c3b9ccf8b844726b10e2ebbd9387a2d</uuid>
                    <name>Skipped actions</name>
                    <type>DEPENDENT</type>
                    <key>actions_stats.skipped</key>
                    <delay>0</delay>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.actions_stats.skipped</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>bfd4d51b60f342b2a5c79c84703ba9fd</uuid>
                            <expression>change(/Template Shelly Motion - MQTT/actions_stats.skipped)&gt;0</expression>
                            <name>At least one action has been skipped</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>99c7bd9589814bc0b4f1e91613846c33</uuid>
                    <name>Battery percentage</name>
                    <type>DEPENDENT</type>
                    <key>bat.value</key>
                    <delay>0</delay>
                    <units>%</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.bat.value</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Battery</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>32c4c593558946128bede0a90ef14ec2</uuid>
                            <expression>last(/Template Shelly Motion - MQTT/bat.value)&lt;=10</expression>
                            <name>Sensor battery is low</name>
                            <priority>HIGH</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                        <trigger>
                            <uuid>1bb40a6a17754bcaad3b7c95b63c15b2</uuid>
                            <expression>last(/Template Shelly Motion - MQTT/bat.value)&gt;10 and last(/Template Shelly Motion - MQTT/bat.value)&lt;=20</expression>
                            <name>Sensor battery is low</name>
                            <priority>AVERAGE</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>549efb1bb1504d728adb1debf0762895</uuid>
                    <name>Battery voltage</name>
                    <type>DEPENDENT</type>
                    <key>bat.voltage</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>V</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.bat.voltage</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Battery</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>41f01089f3714e83a29cecdfc6b9a872</uuid>
                    <name>System configuration changes</name>
                    <type>DEPENDENT</type>
                    <key>cfg_changed_cnt</key>
                    <delay>0</delay>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.cfg_changed_cnt</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>95138ed580b14e3d837e57e4f728ccaf</uuid>
                            <expression>change(/Template Shelly Motion - MQTT/cfg_changed_cnt)&gt;0</expression>
                            <name>System configuration has been changed</name>
                            <priority>INFO</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>37825dc185e34e518fc9a4ca6e076c97</uuid>
                    <name>Charger connected</name>
                    <type>DEPENDENT</type>
                    <key>charger</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.charger</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>9819ec9a9ff840c9b842d1184f0dc32e</uuid>
                    <name>Cloud connected</name>
                    <type>DEPENDENT</type>
                    <key>cloud.connected</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.cloud.connected</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Cloud</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>33c5849f7d4144dc90c0eac6b622a6c8</uuid>
                            <expression>change(/Template Shelly Motion - MQTT/cloud.connected)&lt;&gt;0</expression>
                            <name>Cloud connection state has changed</name>
                            <priority>AVERAGE</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Cloud</value>
                                </tag>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>4dfa7550909842c7a06dc7fd0448e4b5</uuid>
                    <name>Cloud enabled</name>
                    <type>DEPENDENT</type>
                    <key>cloud.enabled</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.cloud.enabled</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Cloud</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>67534c87a78c4074b26d74422f070682</uuid>
                            <expression>change(/Template Shelly Motion - MQTT/cloud.enabled)&lt;&gt;0</expression>
                            <name>Cloud configuration has changed</name>
                            <priority>INFO</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Cloud</value>
                                </tag>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>d3e4b23003c7415f8bd256f4b0a28ab8</uuid>
                    <name>File system free size</name>
                    <type>DEPENDENT</type>
                    <key>fs_free</key>
                    <delay>0</delay>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.fs_free</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>33946e25c42b4fc0a393355905174b65</uuid>
                    <name>File system total size</name>
                    <type>DEPENDENT</type>
                    <key>fs_size</key>
                    <delay>0</delay>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.fs_size</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>a7b7e0b77dcb49abbcc86f879c290db3</uuid>
                    <name>Lux illumination</name>
                    <type>DEPENDENT</type>
                    <key>lux.illumination</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.lux.illumination</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Lux sensor</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>f6a207578c99445b861d8cad731dcb87</uuid>
                    <name>Lux sensor self-check</name>
                    <type>DEPENDENT</type>
                    <key>lux.is_valid</key>
                    <delay>0</delay>
                    <valuemap>
                        <name>Self-check</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.lux.is_valid</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>BOOL_TO_DECIMAL</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Lux sensor</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Sefl-check</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>eff2eb7166784deb87c1b5fc24f75d7a</uuid>
                    <name>Lux value</name>
                    <type>DEPENDENT</type>
                    <key>lux.value</key>
                    <delay>0</delay>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.lux.value</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Lux sensor</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>111ed2d90d7949bd867b0242d36cf4b5</uuid>
                    <name>MQTT connected</name>
                    <type>DEPENDENT</type>
                    <key>mqtt.connected</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.mqtt.connected</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>MQTT</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>8332e83752ed443ab0aba8ab48c97b9b</uuid>
                            <expression>change(/Template Shelly Motion - MQTT/mqtt.connected)&lt;&gt;0</expression>
                            <name>MQTT connection state has changed</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>9d85d0033e60475fa89ce4a5613644c9</uuid>
                    <name>Status data</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    <delay>0</delay>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>Collect data from Shelly device status topic.</description>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Data collection</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>9d2c328904564824b2083baca2875f6f</uuid>
                            <expression>nodata(/Template Shelly Motion - MQTT/mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}],180s)=1</expression>
                            <name>No data received</name>
                            <priority>HIGH</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Data collection</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>d01729798c1e4571b70f5501ea047171</uuid>
                    <name>RAM free</name>
                    <type>DEPENDENT</type>
                    <key>ram_free</key>
                    <delay>0</delay>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.ram_free</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>a7cca86a44854a44a2168d5fe337c38a</uuid>
                    <name>RAM total</name>
                    <type>DEPENDENT</type>
                    <key>ram_total</key>
                    <delay>0</delay>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.ram_total</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>3bc28629a25f4691bcacdc9e38ed0fa4</uuid>
                    <name>Motion sensor active</name>
                    <type>DEPENDENT</type>
                    <key>sensor.active</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.sensor.active</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Motion sensor</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>25978a3ce04947b197fa5e6210da29b8</uuid>
                            <expression>last(/Template Shelly Motion - MQTT/sensor.active)=&quot;true&quot;</expression>
                            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                            <recovery_expression>last(/Template Shelly Motion - MQTT/sensor.active)=&quot;false&quot;</recovery_expression>
                            <name>Motion sensor active</name>
                            <priority>INFO</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Motion sensor</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>a5a7a9a20f1d40c18ee3b51fee767515</uuid>
                    <name>Motion sensor self-check</name>
                    <type>DEPENDENT</type>
                    <key>sensor.is_valid</key>
                    <delay>0</delay>
                    <valuemap>
                        <name>Self-check</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.sensor.is_valid</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>BOOL_TO_DECIMAL</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Motion sensor</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Sefl-check</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>799855a06c754124b62129c04e51db33</uuid>
                    <name>Motion detection</name>
                    <type>DEPENDENT</type>
                    <key>sensor.motion</key>
                    <delay>0</delay>
                    <valuemap>
                        <name>Motion</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.sensor.motion</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>BOOL_TO_DECIMAL</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Motion sensor</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>8053e3caae934b18b1c9312f06bccbb0</uuid>
                    <name>Tamper detection</name>
                    <type>DEPENDENT</type>
                    <key>sensor.vibration</key>
                    <delay>0</delay>
                    <valuemap>
                        <name>Tampering</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.sensor.vibration</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>BOOL_TO_DECIMAL</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Motion sensor</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>8979e32eb18646ce87bad3a5f745409c</uuid>
                    <name>Device time</name>
                    <type>DEPENDENT</type>
                    <key>unixtime</key>
                    <delay>0</delay>
                    <units>unixtime</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.unixtime</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>a3c075d1519d453a93eeffe4dd6f85c1</uuid>
                            <expression>fuzzytime(/Template Shelly Motion - MQTT/unixtime,60s)=0</expression>
                            <name>Time is out of sync</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>035c00e4aedc4a53995f8a77066ce7bd</uuid>
                    <name>Update available</name>
                    <type>DEPENDENT</type>
                    <key>update.has_update</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.update.has_update</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>9b1a6c669de6411ebfed8ee793b9beed</uuid>
                            <expression>last(/Template Shelly Motion - MQTT/update.has_update)=&quot;true&quot;</expression>
                            <name>Update available</name>
                            <priority>INFO</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>a48603a3536643d1bf38298690c410f8</uuid>
                    <name>Firmware new version</name>
                    <type>DEPENDENT</type>
                    <key>update.new_version</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.update.new_version</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>167f8e60be5744b0a85f9609dd34631b</uuid>
                    <name>Firmware old version</name>
                    <type>DEPENDENT</type>
                    <key>update.old_version</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.update.old_version</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>893c7fe674c444ad80011d18541dc654</uuid>
                            <expression>change(/Template Shelly Motion - MQTT/update.old_version)&lt;&gt;0</expression>
                            <name>Version has changed</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>59e42489916f4185849f8bfa58d22500</uuid>
                    <name>Uptime</name>
                    <type>DEPENDENT</type>
                    <key>uptime</key>
                    <delay>0</delay>
                    <units>uptime</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.uptime</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>de2b7f66d229441480fdc2f39359af33</uuid>
                            <expression>change(/Template Shelly Motion - MQTT/uptime)&lt;0</expression>
                            <name>Device has been restarted</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>7287d9c1a7c94a5ab364aa2e3140829d</uuid>
                    <name>WiFi connected</name>
                    <type>DEPENDENT</type>
                    <key>wifi_sta.connected</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.wifi_sta.connected</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>WiFi</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>7557163db8ce4bb292f0e7e262d7ea55</uuid>
                    <name>WiFi IP</name>
                    <type>DEPENDENT</type>
                    <key>wifi_sta.ip</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.wifi_sta.ip</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>WiFi</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>b2a774d369c54c1c9388ad79aa6b0e48</uuid>
                    <name>WiFi RSSI</name>
                    <type>DEPENDENT</type>
                    <key>wifi_sta.rssi</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>dBm</units>
                    <valuemap>
                        <name>Received Signal Strength Indicator</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.wifi_sta.rssi</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>WiFi</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>7c9cbf36eada4b6a91bc2d7ded63841c</uuid>
                    <name>WiFi SSID</name>
                    <type>DEPENDENT</type>
                    <key>wifi_sta.ssid</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.wifi_sta.ssid</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>WiFi</value>
                        </tag>
                    </tags>
                </item>
            </items>
            <macros>
                <macro>
                    <macro>{$MQTT_BROKER_HOST}</macro>
                    <value>tcp://localhost:1883</value>
                    <description>MQTT broker host</description>
                </macro>
                <macro>
                    <macro>{$MQTT_BROKER_PASS}</macro>
                    <type>SECRET_TEXT</type>
                    <description>MQTT broker password, if configured</description>
                </macro>
                <macro>
                    <macro>{$MQTT_BROKER_USER}</macro>
                    <description>MQTT broker user, if configured</description>
                </macro>
                <macro>
                    <macro>{$MQTT_DEVICE_ID}</macro>
                    <description>Shelly device MQTT ID</description>
                </macro>
            </macros>
            <valuemaps>
                <valuemap>
                    <uuid>72537e98ecb741e7805afd7f3d494dfb</uuid>
                    <name>Motion</name>
                    <mappings>
                        <mapping>
                            <value>1</value>
                            <newvalue>Motion</newvalue>
                        </mapping>
                        <mapping>
                            <value>0</value>
                            <newvalue>No motion</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
                <valuemap>
                    <uuid>1e4e762895464e00a3311572e4dfc65f</uuid>
                    <name>Received Signal Strength Indicator</name>
                    <mappings>
                        <mapping>
                            <type>GREATER_OR_EQUAL</type>
                            <value>-30</value>
                            <newvalue>Amazing</newvalue>
                        </mapping>
                        <mapping>
                            <type>GREATER_OR_EQUAL</type>
                            <value>-67</value>
                            <newvalue>Very Good</newvalue>
                        </mapping>
                        <mapping>
                            <type>GREATER_OR_EQUAL</type>
                            <value>-70</value>
                            <newvalue>Good</newvalue>
                        </mapping>
                        <mapping>
                            <type>GREATER_OR_EQUAL</type>
                            <value>-80</value>
                            <newvalue>Not Good</newvalue>
                        </mapping>
                        <mapping>
                            <type>LESS_OR_EQUAL</type>
                            <value>-81</value>
                            <newvalue>Unusable</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
                <valuemap>
                    <uuid>f09b01e65abe40f3a27976d80ebfec84</uuid>
                    <name>Self-check</name>
                    <mappings>
                        <mapping>
                            <value>1</value>
                            <newvalue>Working</newvalue>
                        </mapping>
                        <mapping>
                            <value>0</value>
                            <newvalue>Not working</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
                <valuemap>
                    <uuid>e03b534f829447d395603c7ee1f94527</uuid>
                    <name>Tampering</name>
                    <mappings>
                        <mapping>
                            <value>1</value>
                            <newvalue>Tamper</newvalue>
                        </mapping>
                        <mapping>
                            <value>0</value>
                            <newvalue>No tamper</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
            </valuemaps>
        </template>
    </templates>
    <triggers>
        <trigger>
            <uuid>74d8fe16f2764d31a003c8afed9e360c</uuid>
            <expression>last(/Template Shelly Motion - MQTT/sensor.motion)=1</expression>
            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
            <recovery_expression>sum(/Template Shelly Motion - MQTT/sensor.motion,10m)=0 or last(/Template Shelly Motion - MQTT/sensor.active)=&quot;false&quot;</recovery_expression>
            <name>Motion detected</name>
            <priority>HIGH</priority>
            <tags>
                <tag>
                    <tag>Application</tag>
                    <value>Motion sensor</value>
                </tag>
            </tags>
        </trigger>
        <trigger>
            <uuid>8cf9c39a72d846139565b5577f296da3</uuid>
            <expression>last(/Template Shelly Motion - MQTT/fs_free)&gt;=last(/Template Shelly Motion - MQTT/fs_size)*0.8 and last(/Template Shelly Motion - MQTT/fs_free)&lt;last(/Template Shelly Motion - MQTT/fs_size)*0.9</expression>
            <name>Sensor file system space is low</name>
            <status>DISABLED</status>
            <priority>WARNING</priority>
            <tags>
                <tag>
                    <tag>Application</tag>
                    <value>System</value>
                </tag>
            </tags>
        </trigger>
        <trigger>
            <uuid>f53b6b1333e346e4b5356fdfb6a4163c</uuid>
            <expression>last(/Template Shelly Motion - MQTT/fs_free)&gt;=last(/Template Shelly Motion - MQTT/fs_size)*0.9</expression>
            <name>Sensor file system space is low</name>
            <status>DISABLED</status>
            <priority>AVERAGE</priority>
            <tags>
                <tag>
                    <tag>Application</tag>
                    <value>System</value>
                </tag>
            </tags>
        </trigger>
        <trigger>
            <uuid>2d56f585ccd7473a821f07adfe4f8c60</uuid>
            <expression>last(/Template Shelly Motion - MQTT/ram_free)&gt;=last(/Template Shelly Motion - MQTT/ram_total)*0.8 and last(/Template Shelly Motion - MQTT/ram_free)&lt;last(/Template Shelly Motion - MQTT/ram_total)*0.9</expression>
            <name>Sensor memory is low</name>
            <status>DISABLED</status>
            <priority>WARNING</priority>
            <tags>
                <tag>
                    <tag>Application</tag>
                    <value>System</value>
                </tag>
            </tags>
        </trigger>
        <trigger>
            <uuid>5e9ed487d0f242328dbd7f702db79cfb</uuid>
            <expression>last(/Template Shelly Motion - MQTT/ram_free)&gt;=last(/Template Shelly Motion - MQTT/ram_total)*0.9</expression>
            <name>Sensor memory is low</name>
            <status>DISABLED</status>
            <priority>AVERAGE</priority>
            <tags>
                <tag>
                    <tag>Application</tag>
                    <value>System</value>
                </tag>
            </tags>
        </trigger>
        <trigger>
            <uuid>93ffcaf61d5e4017b4fb2c83c9bb4670</uuid>
            <expression>last(/Template Shelly Motion - MQTT/sensor.vibration)=1 and last(/Template Shelly Motion - MQTT/sensor.active)=&quot;true&quot;</expression>
            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
            <recovery_expression>sum(/Template Shelly Motion - MQTT/sensor.vibration,10m)=0 or last(/Template Shelly Motion - MQTT/sensor.active)=&quot;false&quot;</recovery_expression>
            <name>Tampering detected</name>
            <priority>HIGH</priority>
            <tags>
                <tag>
                    <tag>Application</tag>
                    <value>Motion sensor</value>
                </tag>
            </tags>
        </trigger>
    </triggers>
</zabbix_export>
