<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.4</version>
    <date>2021-08-04T09:49:27Z</date>
    <groups>
        <group>
            <uuid>f609ef9a7ec748ae8ceb88ad929b7613</uuid>
            <name>Shelly</name>
        </group>
        <group>
            <uuid>36bff6c29af64692839d077febfc7079</uuid>
            <name>Templates/Network devices</name>
        </group>
    </groups>
    <templates>
        <template>
            <uuid>d9d1a00713ca44e383634ba852e8bb12</uuid>
            <template>Template Shelly 3EM - MQTT</template>
            <name>Template Shelly 3EM - MQTT</name>
            <groups>
                <group>
                    <name>Shelly</name>
                </group>
                <group>
                    <name>Templates/Network devices</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>c712d922fec749f9a19e19fc6353851c</uuid>
                    <name>Skipped actions</name>
                    <type>DEPENDENT</type>
                    <key>actions_stats.skipped</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.actions_stats.skipped</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>c12233fc35c64a18bb523103652626c7</uuid>
                            <expression>change(/Template Shelly 3EM - MQTT/actions_stats.skipped)&gt;0</expression>
                            <name>At least one action has been skipped</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>4e53ae5fd4c14132aa186713cb3eac1a</uuid>
                    <name>System configuration changes</name>
                    <type>DEPENDENT</type>
                    <key>cfg_changed_cnt</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.cfg_changed_cnt</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>dd3b8e51d5094e569d916d787cd01924</uuid>
                            <expression>change(/Template Shelly 3EM - MQTT/cfg_changed_cnt)&gt;0</expression>
                            <name>System configuration has been changed</name>
                            <priority>INFO</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>fa011634183840a5a82050ae36fe071f</uuid>
                    <name>Cloud connected</name>
                    <type>DEPENDENT</type>
                    <key>cloud.connected</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.cloud.connected</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Cloud</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>2aa23bc6bc234fdb949247677c0bab96</uuid>
                            <expression>change(/Template Shelly 3EM - MQTT/cloud.connected)&lt;&gt;0</expression>
                            <name>Cloud connection state has changed</name>
                            <priority>AVERAGE</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Cloud</value>
                                </tag>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>817610344daa494e8348a502b3b7c9e8</uuid>
                    <name>Cloud enabled</name>
                    <type>DEPENDENT</type>
                    <key>cloud.enabled</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.cloud.enabled</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Cloud</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>004bb4b18a104b2283a9ffe1373c749b</uuid>
                            <expression>change(/Template Shelly 3EM - MQTT/cloud.enabled)&lt;&gt;0</expression>
                            <name>Cloud configuration has changed</name>
                            <priority>INFO</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Cloud</value>
                                </tag>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>8ee4492271f7496696ba3b2b6cfaed05</uuid>
                    <name>Electric company electrometer estimate</name>
                    <type>DEPENDENT</type>
                    <key>ec_em_estimate</key>
                    <delay>0</delay>
                    <history>1825d</history>
                    <status>DISABLED</status>
                    <value_type>FLOAT</value_type>
                    <units>Wh</units>
                    <description>Estimated value of electric company electrometer. This value may differ from real value due to device restarts or incorrect measurements. This estimate is only useful when your Shelly 3EM is measuring power consumption on the main breaker.

For this value to show correct estimate, you have to take a note of how many Wh were on electric company electrometer when you reset Shelly 3EM data and put this value into macro {$EC_EM_CONSUMPTION}.</description>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>var json_data = JSON.parse(value);

var ec_emeter_offset  = 0;

var emeter_a_consumed = 0;
var emeter_b_consumed = 0;
var emeter_c_consumed = 0;
var emeter_n_consumed = 0;

var emeter_a_returned = 0;
var emeter_b_returned = 0;
var emeter_c_returned = 0;
var emeter_n_returned = 0;

var ec_em_consumed= '{$EC_EM_CONSUMPTION}';

if (ec_em_consumed == '' || ec_em_consumed == null || ec_em_consumed === undefined) {
  ec_em_consumed = 0;
} else {
  try {
    ec_em_consumed = parseInt(ec_em_consumed);
  } catch (e) {
    ec_em_consumed = 0;
  }
}

ec_emeter_offset = ec_em_consumed;

if (json_data.emeters[0]) {
  emeter_a_consumed = json_data.emeters[0].total;
}
if (json_data.emeters[1]) {
  emeter_b_consumed = json_data.emeters[1].total;
}
if (json_data.emeters[2]) {
  emeter_c_consumed = json_data.emeters[2].total;
}
if (json_data.emeters[3]) {
  emeter_n_consumed = json_data.emeters[3].total;
}

if (json_data.emeters[0]) {
  emeter_a_returned = json_data.emeters[0].total_returned;
}
if (json_data.emeters[1]) {
  emeter_b_returned = json_data.emeters[1].total_returned;
}
if (json_data.emeters[2]) {
  emeter_c_returned = json_data.emeters[2].total_returned;
}
if (json_data.emeters[3]) {
  emeter_n_returned = json_data.emeters[3].total_returned;
}

return ec_emeter_offset + ((emeter_a_consumed + emeter_b_consumed + emeter_c_consumed + emeter_n_consumed) - (emeter_a_returned + emeter_b_returned + emeter_c_returned + emeter_n_returned));</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer summary</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>b3d5337b8013479481132651c01cba02</uuid>
                    <name>Electrometer A current</name>
                    <type>DEPENDENT</type>
                    <key>emeters-0.current</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>A</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[0].current</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer A</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>b0d421be1e6c457ba5bb4056939aed4b</uuid>
                    <name>Electrometer A self-check</name>
                    <type>DEPENDENT</type>
                    <key>emeters-0.is_valid</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <valuemap>
                        <name>Self-check</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[0].is_valid</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>BOOL_TO_DECIMAL</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer A</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Self-check</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>53e0bcee831849168cde673a8f85c142</uuid>
                    <name>Electrometer A power factor</name>
                    <type>DEPENDENT</type>
                    <key>emeters-0.pf</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[0].pf</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer A</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>e9af68c5ffc74098b1ebb49b2eaf1745</uuid>
                    <name>Electrometer A power</name>
                    <type>DEPENDENT</type>
                    <key>emeters-0.power</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>W</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[0].power</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer A</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>b28d35a52948419bbd83ed0fe27d232e</uuid>
                    <name>Electrometer A total consumed</name>
                    <type>DEPENDENT</type>
                    <key>emeters-0.total</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>Wh</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[0].total</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer A</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>8db7e24e57084e829d965a584a1ef8b2</uuid>
                    <name>Electrometer A total returned</name>
                    <type>DEPENDENT</type>
                    <key>emeters-0.total_returned</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>Wh</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[0].total_returned</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer A</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>f428d123409042b292b860b48bf2ccca</uuid>
                    <name>Electrometer A voltage</name>
                    <type>DEPENDENT</type>
                    <key>emeters-0.voltage</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>V</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[0].voltage</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer A</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>970995c832d24071b626e51133645d43</uuid>
                    <name>Electrometer B current</name>
                    <type>DEPENDENT</type>
                    <key>emeters-1.current</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>A</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[1].current</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer B</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>efdb1799b410411881a330b68987bcd8</uuid>
                    <name>Electrometer B self-check</name>
                    <type>DEPENDENT</type>
                    <key>emeters-1.is_valid</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[1].is_valid</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>BOOL_TO_DECIMAL</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer B</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Self-check</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>10f2f6f3fac3440d9e0d78a122b416ee</uuid>
                    <name>Electrometer B power factor</name>
                    <type>DEPENDENT</type>
                    <key>emeters-1.pf</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[1].pf</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer B</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>a059ffd03de144efae2e2c259409855a</uuid>
                    <name>Electrometer B power</name>
                    <type>DEPENDENT</type>
                    <key>emeters-1.power</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>W</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[1].power</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer B</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>84c8a7fab8ef417cb443c3284baec177</uuid>
                    <name>Electrometer B total consumed</name>
                    <type>DEPENDENT</type>
                    <key>emeters-1.total</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>Wh</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[1].total</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer B</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>17ae92df20734080af40ec093dc03e3f</uuid>
                    <name>Electrometer B total returned</name>
                    <type>DEPENDENT</type>
                    <key>emeters-1.total_returned</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>Wh</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[1].total_returned</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer B</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>823362bbd28e4bccbe755b2bd21775b9</uuid>
                    <name>Electrometer B voltage</name>
                    <type>DEPENDENT</type>
                    <key>emeters-1.voltage</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>V</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[1].voltage</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer B</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>c58712c52b954c9cb9925c94c3e3e4f4</uuid>
                    <name>Electrometer C current</name>
                    <type>DEPENDENT</type>
                    <key>emeters-2.current</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>A</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[2].current</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer C</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>e5b6b6d1a6ad487ba8bbc6e3e8d56ded</uuid>
                    <name>Electrometer C self-check</name>
                    <type>DEPENDENT</type>
                    <key>emeters-2.is_valid</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[2].is_valid</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>BOOL_TO_DECIMAL</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer C</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Self-check</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>348191a4d7364428af574e9d72bfb756</uuid>
                    <name>Electrometer C power factor</name>
                    <type>DEPENDENT</type>
                    <key>emeters-2.pf</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[2].pf</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer C</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>0690eb009379491c910d7933aaab2fd9</uuid>
                    <name>Electrometer C power</name>
                    <type>DEPENDENT</type>
                    <key>emeters-2.power</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>W</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[2].power</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer C</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>478bba63e48646659d8952aea18af60e</uuid>
                    <name>Electrometer C total consumed</name>
                    <type>DEPENDENT</type>
                    <key>emeters-2.total</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>Wh</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[2].total</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer C</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>0ec7f205a8e94f338306aa811b51fb5b</uuid>
                    <name>Electrometer C total returned</name>
                    <type>DEPENDENT</type>
                    <key>emeters-2.total_returned</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>Wh</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[2].total_returned</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer C</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>d29db3ef9a2842e0bd36f46a30609bad</uuid>
                    <name>Electrometer C voltage</name>
                    <type>DEPENDENT</type>
                    <key>emeters-2.voltage</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>V</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[2].voltage</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer C</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>5c934e3b1d004748b01959284c224b40</uuid>
                    <name>Electrometer N current</name>
                    <type>DEPENDENT</type>
                    <key>emeters-3.current</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <status>DISABLED</status>
                    <value_type>FLOAT</value_type>
                    <units>A</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[3].current</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer N</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>65b725295c07407086c1a4bb06c10efb</uuid>
                    <name>Electrometer N self-check</name>
                    <type>DEPENDENT</type>
                    <key>emeters-3.is_valid</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <status>DISABLED</status>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[3].is_valid</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>BOOL_TO_DECIMAL</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer N</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Self-check</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>a0c31755b79a4f4081995be95eafef89</uuid>
                    <name>Electrometer N power factor</name>
                    <type>DEPENDENT</type>
                    <key>emeters-3.pf</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <status>DISABLED</status>
                    <value_type>FLOAT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[3].pf</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer N</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>5831b9d2a7c64b71a552c1a70bc444d4</uuid>
                    <name>Electrometer N power</name>
                    <type>DEPENDENT</type>
                    <key>emeters-3.power</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <status>DISABLED</status>
                    <value_type>FLOAT</value_type>
                    <units>W</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[3].power</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer N</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>f62d9ca874034fe598fea1d6a1b86a6a</uuid>
                    <name>Electrometer N total consumed</name>
                    <type>DEPENDENT</type>
                    <key>emeters-3.total</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <status>DISABLED</status>
                    <value_type>FLOAT</value_type>
                    <units>Wh</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[3].total</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer N</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>ea2c2642fc934109b41ff6c3373fc310</uuid>
                    <name>Electrometer N total returned</name>
                    <type>DEPENDENT</type>
                    <key>emeters-3.total_returned</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <status>DISABLED</status>
                    <value_type>FLOAT</value_type>
                    <units>Wh</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[3].total_returned</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer N</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>d6f94109b48341a6bd7dbd9c217dcf81</uuid>
                    <name>Electrometer N voltage</name>
                    <type>DEPENDENT</type>
                    <key>emeters-3.voltage</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <status>DISABLED</status>
                    <value_type>FLOAT</value_type>
                    <units>V</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.emeters[3].voltage</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer N</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometers</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>86f64ae2044f407c94c3c0b13823c146</uuid>
                    <name>File system free size</name>
                    <type>DEPENDENT</type>
                    <key>fs_free</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.fs_free</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>c4478ca261624ba9a5ed10b0d1d19055</uuid>
                    <name>Sysflash is mounted</name>
                    <type>DEPENDENT</type>
                    <key>fs_mounted</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.fs_mounted</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>aa87ae09c8b84cdc80bd642a1017803c</uuid>
                    <name>File system total size</name>
                    <type>DEPENDENT</type>
                    <key>fs_size</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.fs_size</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>efa92edb83d84f3787021727198e2523</uuid>
                    <name>MQTT connected</name>
                    <type>DEPENDENT</type>
                    <key>mqtt.connected</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.mqtt.connected</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>MQTT</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>be91b0e32bf04abda3db6dfb6480273d</uuid>
                            <expression>change(/Template Shelly 3EM - MQTT/mqtt.connected)&lt;&gt;0</expression>
                            <name>MQTT connection state has changed</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>ee239b5171bb4588994e4b69f3cf7240</uuid>
                    <name>Status data</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    <delay>0</delay>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>Collect data from Shelly device status topic.</description>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Data collection</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>c8cefea8573b42ecaa41b35cc0aee0be</uuid>
                            <expression>nodata(/Template Shelly 3EM - MQTT/mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}],120s)=1</expression>
                            <name>No data received</name>
                            <priority>HIGH</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Data collection</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>87f7e30ca0fb47b6ac5eb452dcc01565</uuid>
                    <name>RAM free</name>
                    <type>DEPENDENT</type>
                    <key>ram_free</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.ram_free</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>878225154d73432f811ec02c411d015a</uuid>
                    <name>RAM total</name>
                    <type>DEPENDENT</type>
                    <key>ram_total</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.ram_total</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>98237acaad8a41008dc2e127e48b4da3</uuid>
                    <name>Relay has timer</name>
                    <type>DEPENDENT</type>
                    <key>relays-0.has_timer</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.relays[0].has_timer</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Relay</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>4a771db1d8c7404180a26d1c6fb5dce2</uuid>
                    <name>Relay turned on</name>
                    <type>DEPENDENT</type>
                    <key>relays-0.ison</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.relays[0].ison</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Relay</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>f64e33573be544298eb766e2628e73ef</uuid>
                            <expression>change(/Template Shelly 3EM - MQTT/relays-0.ison)&lt;&gt;0</expression>
                            <name>Relay state has changed</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Relay</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>1d1a325f57704acc85bb892bb6a7ee6f</uuid>
                    <name>Relay sensor self-check</name>
                    <type>DEPENDENT</type>
                    <key>relays-0.is_valid</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <valuemap>
                        <name>Self-check</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.relays[0].is_valid</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>BOOL_TO_DECIMAL</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Relay</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Sefl-check</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>4232bfff69824155b6ab5832bb86f55c</uuid>
                    <name>Relay overpower occurred</name>
                    <type>DEPENDENT</type>
                    <key>relays-0.overpower</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.relays[0].overpower</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Relay</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>197e0b8b8c67463c81ab38b1d0c9e422</uuid>
                            <expression>last(/Template Shelly 3EM - MQTT/relays-0.overpower)=&quot;true&quot;</expression>
                            <name>Overpower event has been detected</name>
                            <priority>DISASTER</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Relay</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>391e51ecf7d54161aa528db2874a0322</uuid>
                    <name>Relays last command source</name>
                    <type>DEPENDENT</type>
                    <key>relays-0.source</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.relays[0].source</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Relay</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>ebfb3ba82ca449dabc7459249cc7e4ee</uuid>
                    <name>Relay timer duration</name>
                    <type>DEPENDENT</type>
                    <key>relays-0.timer_duration</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <units>s</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.relays[0].timer_duration</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Relay</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>c50e5a0ef8ad4f839d50834b6b5816da</uuid>
                    <name>Relay timer remaining</name>
                    <type>DEPENDENT</type>
                    <key>relays-0.timer_remaining</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <units>s</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.relays[0].timer_remaining</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Relay</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>9c822f91ebb345fbb4c5a5f8cb33b058</uuid>
                    <name>Relay timer started</name>
                    <type>DEPENDENT</type>
                    <key>relays-0.timer_started</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <units>unixtime</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.relays[0].timer_started</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Relay</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>13724f729d8e49feb962b9750ce6645a</uuid>
                    <name>Total consumption from last reset</name>
                    <type>DEPENDENT</type>
                    <key>total_consuption</key>
                    <delay>0</delay>
                    <history>1825d</history>
                    <value_type>FLOAT</value_type>
                    <units>Wh</units>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>var json_data = JSON.parse(value);

var emeter_a = 0;
var emeter_b = 0;
var emeter_c = 0;
var emeter_n = 0;

if (json_data.emeters[0]) {
  emeter_a = json_data.emeters[0].total;
}
if (json_data.emeters[1]) {
  emeter_b = json_data.emeters[1].total;
}
if (json_data.emeters[2]) {
  emeter_c = json_data.emeters[2].total;
}
if (json_data.emeters[3]) {
  emeter_n = json_data.emeters[3].total;
}

return (emeter_a + emeter_b + emeter_c + emeter_n);</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer summary</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>5e7034a24c524cb29e3fc685db07b201</uuid>
                    <name>Total power consumption</name>
                    <type>DEPENDENT</type>
                    <key>total_power</key>
                    <delay>0</delay>
                    <history>365d</history>
                    <value_type>FLOAT</value_type>
                    <units>W</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.total_power</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer summary</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>ea6fb531623f43e48b5ce1ec7c199be8</uuid>
                    <name>Total return from last reset</name>
                    <type>DEPENDENT</type>
                    <key>total_returned</key>
                    <delay>0</delay>
                    <history>1825d</history>
                    <value_type>FLOAT</value_type>
                    <units>Wh</units>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>var json_data = JSON.parse(value);

var emeter_a = 0;
var emeter_b = 0;
var emeter_c = 0;
var emeter_n = 0;

if (json_data.emeters[0]) {
  emeter_a = json_data.emeters[0].total_returned;
}
if (json_data.emeters[1]) {
  emeter_b = json_data.emeters[1].total_returned;
}
if (json_data.emeters[2]) {
  emeter_c = json_data.emeters[2].total_returned;
}
if (json_data.emeters[3]) {
  emeter_n = json_data.emeters[3].total_returned;
}

return (emeter_a + emeter_b + emeter_c + emeter_n);</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>Electrometer summary</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>84024b1385a1459fae0b58ade7fc40c4</uuid>
                    <name>Device time</name>
                    <type>DEPENDENT</type>
                    <key>unixtime</key>
                    <delay>0</delay>
                    <units>unixtime</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.unixtime</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>5cd28e3e494b4eae94cd79f24b6de1d7</uuid>
                            <expression>fuzzytime(/Template Shelly 3EM - MQTT/unixtime,60s)=0</expression>
                            <name>Time is out of sync</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>809071ce141d47878f30f18a512b075e</uuid>
                    <name>Update available</name>
                    <type>DEPENDENT</type>
                    <key>update.has_update</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.update.has_update</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>b01b82ec56a4416d8e5c217ea1a3e66d</uuid>
                            <expression>last(/Template Shelly 3EM - MQTT/update.has_update)=&quot;true&quot;</expression>
                            <name>Update available</name>
                            <priority>INFO</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>1399278b5aab40b19dcb2121e3c7a039</uuid>
                    <name>Firmware new version</name>
                    <type>DEPENDENT</type>
                    <key>update.new_version</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.update.new_version</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>ba73ab9097904c48b5baddf4926ca63d</uuid>
                    <name>Firmware old version</name>
                    <type>DEPENDENT</type>
                    <key>update.old_version</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.update.old_version</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>8930d82089124ecea8559533950a24bc</uuid>
                            <expression>change(/Template Shelly 3EM - MQTT/update.old_version)&lt;&gt;0</expression>
                            <name>Version has changed</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>c9499513c23645aa9a382c12e5da7c00</uuid>
                    <name>Uptime</name>
                    <type>DEPENDENT</type>
                    <key>uptime</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <units>uptime</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.uptime</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>b6f835f5cbd846bd8f88e18f8d0faf4c</uuid>
                            <expression>change(/Template Shelly 3EM - MQTT/uptime)&lt;0</expression>
                            <name>Device has been restarted</name>
                            <priority>WARNING</priority>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>System</value>
                                </tag>
                            </tags>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>c70c6805d5c742c292aafbd65bee4d15</uuid>
                    <name>WiFi connected</name>
                    <type>DEPENDENT</type>
                    <key>wifi_sta.connected</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.wifi_sta.connected</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>WiFi</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>6bae78b3eff24b1885fde577092b21aa</uuid>
                    <name>WiFi IP</name>
                    <type>DEPENDENT</type>
                    <key>wifi_sta.ip</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.wifi_sta.ip</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>WiFi</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>03dc55e375bd49f38060cd87768573e3</uuid>
                    <name>WiFi RSSI</name>
                    <type>DEPENDENT</type>
                    <key>wifi_sta.rssi</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <value_type>FLOAT</value_type>
                    <units>dBm</units>
                    <valuemap>
                        <name>Received Signal Strength Indicator</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.wifi_sta.rssi</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>WiFi</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>b8c27a05a8f44c558e34ac176a303967</uuid>
                    <name>WiFi SSID</name>
                    <type>DEPENDENT</type>
                    <key>wifi_sta.ssid</key>
                    <delay>0</delay>
                    <history>10d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.wifi_sta.ssid</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>mqtt.get[{$MQTT_BROKER_HOST},shellies/{$MQTT_DEVICE_ID}/info,{$MQTT_BROKER_USER},{$MQTT_BROKER_PASS}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>System</value>
                        </tag>
                        <tag>
                            <tag>Application</tag>
                            <value>WiFi</value>
                        </tag>
                    </tags>
                </item>
            </items>
            <macros>
                <macro>
                    <macro>{$EC_EM_CONSUMPTION}</macro>
                    <value>0</value>
                    <description>Total value on your electric company electrometer in Wh at the moment you reset Shelly 3EM data.</description>
                </macro>
                <macro>
                    <macro>{$MQTT_BROKER_HOST}</macro>
                    <value>tcp://localhost:1883</value>
                    <description>MQTT broker host</description>
                </macro>
                <macro>
                    <macro>{$MQTT_BROKER_PASS}</macro>
                    <type>SECRET_TEXT</type>
                    <description>MQTT broker password, if configured</description>
                </macro>
                <macro>
                    <macro>{$MQTT_BROKER_USER}</macro>
                    <description>MQTT broker user, if configured</description>
                </macro>
                <macro>
                    <macro>{$MQTT_DEVICE_ID}</macro>
                    <description>Shelly device MQTT ID</description>
                </macro>
            </macros>
            <valuemaps>
                <valuemap>
                    <uuid>b393a380aae84bbab962b68e42c8f4dd</uuid>
                    <name>Received Signal Strength Indicator</name>
                    <mappings>
                        <mapping>
                            <type>GREATER_OR_EQUAL</type>
                            <value>-30</value>
                            <newvalue>Amazing</newvalue>
                        </mapping>
                        <mapping>
                            <type>GREATER_OR_EQUAL</type>
                            <value>-67</value>
                            <newvalue>Very Good</newvalue>
                        </mapping>
                        <mapping>
                            <type>GREATER_OR_EQUAL</type>
                            <value>-70</value>
                            <newvalue>Good</newvalue>
                        </mapping>
                        <mapping>
                            <type>GREATER_OR_EQUAL</type>
                            <value>-80</value>
                            <newvalue>Not Good</newvalue>
                        </mapping>
                        <mapping>
                            <type>LESS_OR_EQUAL</type>
                            <value>-81</value>
                            <newvalue>Unusable</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
                <valuemap>
                    <uuid>62c7e1ddb29048fbb2169387cda7928f</uuid>
                    <name>Self-check</name>
                    <mappings>
                        <mapping>
                            <value>1</value>
                            <newvalue>Working</newvalue>
                        </mapping>
                        <mapping>
                            <value>0</value>
                            <newvalue>Not working</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
            </valuemaps>
        </template>
    </templates>
    <triggers>
        <trigger>
            <uuid>3446d37ebd4f4aa4a71f7235b5e58ef5</uuid>
            <expression>last(/Template Shelly 3EM - MQTT/fs_free)&gt;=last(/Template Shelly 3EM - MQTT/fs_size)*0.8 and last(/Template Shelly 3EM - MQTT/fs_free)&lt;last(/Template Shelly 3EM - MQTT/fs_size)*0.9</expression>
            <name>Sensor file system space is low</name>
            <status>DISABLED</status>
            <priority>WARNING</priority>
            <tags>
                <tag>
                    <tag>Application</tag>
                    <value>System</value>
                </tag>
            </tags>
        </trigger>
        <trigger>
            <uuid>6c731f22b342478ab8e1a3e92503a9c6</uuid>
            <expression>last(/Template Shelly 3EM - MQTT/fs_free)&gt;=last(/Template Shelly 3EM - MQTT/fs_size)*0.9</expression>
            <name>Sensor file system space is low</name>
            <status>DISABLED</status>
            <priority>AVERAGE</priority>
            <tags>
                <tag>
                    <tag>Application</tag>
                    <value>System</value>
                </tag>
            </tags>
        </trigger>
        <trigger>
            <uuid>20b7fccb6c524d659532c95535a89417</uuid>
            <expression>last(/Template Shelly 3EM - MQTT/ram_free)&gt;=last(/Template Shelly 3EM - MQTT/ram_total)*0.8 and last(/Template Shelly 3EM - MQTT/ram_free)&lt;last(/Template Shelly 3EM - MQTT/ram_total)*0.9</expression>
            <name>Sensor memory is low</name>
            <status>DISABLED</status>
            <priority>WARNING</priority>
            <tags>
                <tag>
                    <tag>Application</tag>
                    <value>System</value>
                </tag>
            </tags>
        </trigger>
        <trigger>
            <uuid>161510decc764d2ab5d79930c617df22</uuid>
            <expression>last(/Template Shelly 3EM - MQTT/ram_free)&gt;=last(/Template Shelly 3EM - MQTT/ram_total)*0.9</expression>
            <name>Sensor memory is low</name>
            <status>DISABLED</status>
            <priority>AVERAGE</priority>
            <tags>
                <tag>
                    <tag>Application</tag>
                    <value>System</value>
                </tag>
            </tags>
        </trigger>
    </triggers>
    <graphs>
        <graph>
            <uuid>694a682d2d5b487c959f65810a9171ea</uuid>
            <name>Total power consumption</name>
            <graph_items>
                <graph_item>
                    <sortorder>1</sortorder>
                    <color>6C59DC</color>
                    <item>
                        <host>Template Shelly 3EM - MQTT</host>
                        <key>total_power</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>2</sortorder>
                    <color>C7A72D</color>
                    <item>
                        <host>Template Shelly 3EM - MQTT</host>
                        <key>emeters-0.power</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>3</sortorder>
                    <color>BA2A5D</color>
                    <item>
                        <host>Template Shelly 3EM - MQTT</host>
                        <key>emeters-1.power</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>4</sortorder>
                    <color>F230E0</color>
                    <item>
                        <host>Template Shelly 3EM - MQTT</host>
                        <key>emeters-2.power</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>5</sortorder>
                    <color>5CCD18</color>
                    <item>
                        <host>Template Shelly 3EM - MQTT</host>
                        <key>emeters-3.power</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
    </graphs>
</zabbix_export>
